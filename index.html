<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Squid Game Calculator</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0f1117;--surface:#1a1d27;--card:#222636;--border:#2e3348;
  --text:#e0e0e8;--dim:#8888a0;--accent:#6c8cff;--green:#4cdb8a;
  --red:#ff6b6b;--yellow:#ffd166;--cyan:#66e0ff;
}
body{font-family:'SF Mono','Fira Code','Cascadia Code',monospace;background:var(--bg);color:var(--text);min-height:100vh;padding:0 0 40px}
.header{background:linear-gradient(135deg,#1a1040,#0f1117 70%);border-bottom:1px solid var(--border);padding:20px;text-align:center}
.header h1{font-size:1.4rem;color:var(--accent);margin-bottom:4px}
.header p{font-size:0.8rem;color:var(--dim)}
.payout-bar{display:flex;flex-wrap:wrap;justify-content:center;gap:6px 12px;margin-top:10px;font-size:0.72rem;color:var(--dim)}
.payout-bar span{white-space:nowrap}
.payout-bar .thr{color:var(--yellow)}

.tabs{display:flex;gap:2px;padding:8px 16px;background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10}
.tab{flex:1;padding:10px;border:none;background:transparent;color:var(--dim);cursor:pointer;font-family:inherit;font-size:0.85rem;border-radius:6px;transition:all .15s;text-align:center}
.tab:hover{background:var(--card);color:var(--text)}
.tab.active{background:var(--accent);color:#fff}

.content{max-width:800px;margin:0 auto;padding:16px}
.panel{display:none}.panel.active{display:block}
.card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:14px}
.card h2{font-size:1rem;color:var(--accent);margin-bottom:10px}
.card h3{font-size:0.9rem;color:var(--cyan);margin:14px 0 6px}

/* Form */
.form-row{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin-bottom:14px}
.form-group{display:flex;flex-direction:column;gap:3px}
.form-group label{font-size:0.72rem;color:var(--dim)}
.form-group .hint{font-size:0.68rem;color:var(--dim);margin-top:2px}
input[type=number]{background:var(--bg);border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:6px;font-family:inherit;font-size:0.9rem;width:80px}
input[type=text]{background:var(--bg);border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:6px;font-family:inherit;font-size:0.9rem;width:100%}
input:focus{outline:none;border-color:var(--accent)}
.calc-btn{background:var(--accent);color:#fff;border:none;padding:10px 24px;border-radius:6px;cursor:pointer;font-family:inherit;font-size:0.9rem;transition:opacity .15s;white-space:nowrap}
.calc-btn:hover{opacity:0.85}
.calc-btn:disabled{opacity:0.5;cursor:not-allowed}
.validation{font-size:0.75rem;margin-top:6px;min-height:1.2em}
.validation.ok{color:var(--green)}
.validation.err{color:var(--red)}

/* Results */
.results{margin-top:16px}
.result-hero{text-align:center;padding:20px;background:var(--bg);border-radius:8px;margin-bottom:12px}
.result-hero .label{font-size:0.8rem;color:var(--dim);margin-bottom:4px}
.result-hero .value{font-size:2rem;font-weight:bold}
.result-hero .value.pos{color:var(--green)}
.result-hero .value.neg{color:var(--red)}
.result-hero .interp{font-size:0.75rem;color:var(--dim);margin-top:6px}
.result-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}
.result-cell{background:var(--bg);border-radius:6px;padding:10px;text-align:center}
.result-cell .label{font-size:0.7rem;color:var(--dim)}
.result-cell .val{font-size:1rem;margin-top:2px;font-variant-numeric:tabular-nums}
.result-cell .val.pos{color:var(--green)}
.result-cell .val.neg{color:var(--red)}
.penalty-box{background:rgba(255,107,107,0.08);border:1px solid rgba(255,107,107,0.2);border-radius:6px;padding:10px;margin-bottom:10px;font-size:0.8rem}
.penalty-box .title{color:var(--red);font-weight:bold;margin-bottom:4px}
.threshold-note{background:rgba(255,209,102,0.08);border:1px solid rgba(255,209,102,0.2);border-radius:6px;padding:10px;margin-bottom:10px;font-size:0.8rem;color:var(--yellow)}

/* Reference table */
.ref-table{width:100%;border-collapse:collapse;font-size:0.78rem;margin-top:8px}
.ref-table th{text-align:left;color:var(--dim);padding:6px 8px;border-bottom:1px solid var(--border);font-weight:normal;white-space:nowrap}
.ref-table td{padding:6px 8px;border-bottom:1px solid rgba(46,51,72,0.4);font-variant-numeric:tabular-nums}
.ref-table .num{text-align:right}
.ref-table .pos{color:var(--green)}
.ref-table .neg{color:var(--red)}
.ref-table .thr{color:var(--yellow)}
.ref-table tr:hover td{background:rgba(108,140,255,0.05)}
.rule{padding:6px 0;font-size:0.8rem;border-bottom:1px solid rgba(46,51,72,0.3)}
.rule b{color:var(--cyan)}

@media(max-width:600px){
  .form-row{flex-direction:column;align-items:stretch}
  input[type=number]{width:100%}
  .result-grid{grid-template-columns:1fr 1fr}
  .ref-table{font-size:0.7rem}
  .ref-table th,.ref-table td{padding:4px 5px}
}
</style>
</head>
<body>

<div class="header">
  <h1>Squid Game Calculator</h1>
  <p>9 players &middot; 12 squids &middot; $5k/squid &middot; Zero-sum with penalty</p>
  <div class="payout-bar">
    <span>1=$5k</span><span>2=$10k</span>
    <span class="thr">3=$30k (2x)</span><span>4=$40k</span>
    <span class="thr">5=$100k (4x)</span><span>6=$120k</span>
    <span class="thr">7=$210k (6x)</span><span>8=$240k</span>
  </div>
</div>

<div class="tabs">
  <button class="tab active" onclick="switchTab('calc')">Hand Value Calculator</button>
  <button class="tab" onclick="switchTab('ref')">Quick Reference</button>
</div>

<div class="content">

<!-- TAB 1: CALCULATOR -->
<div class="panel active" id="panel-calc">
  <div class="card">
    <h2>What is this hand worth?</h2>
    <p style="color:var(--dim);font-size:0.78rem;margin-bottom:12px">
      Enter your game state. Monte Carlo simulates 200k games to compute hand value.
    </p>

    <div class="form-row">
      <div class="form-group">
        <label>Your Squids</label>
        <input type="number" id="in-my" value="0" min="0" max="12" oninput="validate()">
      </div>
      <div class="form-group">
        <label>Hands Remaining</label>
        <input type="number" id="in-remain" value="7" min="1" max="11" oninput="validate()">
      </div>
      <div class="form-group">
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;font-size:0.78rem;color:var(--text)">
          <input type="checkbox" id="in-double" onchange="validate()"> Double hand (+2 squids)
        </label>
      </div>
    </div>

    <div class="form-group" style="margin-bottom:12px">
      <label>Opponent Squid Counts</label>
      <input type="text" id="in-opp" value="3, 1, 1" placeholder="e.g. 3, 1, 1  (unlisted = 0)" oninput="validate()">
      <div class="hint">Comma-separated. Enter counts for opponents who have squids; rest assumed 0.</div>
    </div>

    <div class="validation" id="validation"></div>

    <div style="display:flex;gap:10px;align-items:center;margin-top:8px">
      <button class="calc-btn" id="calc-btn" onclick="runCalc()">CALCULATE</button>
      <span id="calc-status" style="font-size:0.75rem;color:var(--dim)"></span>
    </div>

    <div class="results" id="results" style="display:none"></div>
  </div>

  <div class="card">
    <h2>How it works</h2>
    <p style="font-size:0.78rem;color:var(--dim);line-height:1.5">
      <b style="color:var(--text)">Hand Value</b> = E[your net if you WIN] - E[your net if you LOSE]<br><br>
      <b style="color:var(--green)">Winners</b> (end with squids): earn payout &times; (opponents at 0)<br>
      <b style="color:var(--red)">Losers</b> (end with 0 squids): pay sum of all opponents' payouts<br><br>
      The penalty for ending at 0 is typically <b style="color:var(--red)">$80k-$150k</b>.
      This makes the first squid enormously valuable — it's not just about earning, it's about avoiding ruin.
    </p>
  </div>
</div>

<!-- TAB 2: REFERENCE -->
<div class="panel" id="panel-ref">
  <div class="card">
    <h2>Hand Value by Squid Count</h2>
    <p style="color:var(--dim);font-size:0.78rem;margin-bottom:10px">
      Average hand value across common game situations at 1/9 win rate.
    </p>
    <table class="ref-table">
      <tr><th>Your Sq</th><th class="num">Avg Value</th><th class="num">Range</th><th>Key Insight</th></tr>
      <tr><td>0</td><td class="num pos">$71k</td><td class="num">$65k-$77k</td><td>Avoiding $90k+ penalty is huge</td></tr>
      <tr><td>1</td><td class="num pos">$36k</td><td class="num">$36k</td><td>Escaped zero, building toward 2x</td></tr>
      <tr><td class="thr">2</td><td class="num pos">$62k</td><td class="num">$55k-$69k</td><td class="thr">One from 2x threshold</td></tr>
      <tr><td>3</td><td class="num pos">$101k</td><td class="num">$100k-$103k</td><td>At 2x, building toward 4x</td></tr>
      <tr><td class="thr">4</td><td class="num pos">$208k</td><td class="num">$178k-$260k</td><td class="thr">One from 4x — huge jump</td></tr>
      <tr><td>5</td><td class="num pos">$191k</td><td class="num">$191k</td><td>At 4x, chasing 6x jackpot</td></tr>
      <tr><td class="thr">6</td><td class="num pos">$409k</td><td class="num">$368k-$440k</td><td class="thr">One from 6x — THE JACKPOT</td></tr>
    </table>
  </div>

  <div class="card">
    <h2>20 Common Scenarios</h2>
    <p style="color:var(--dim);font-size:0.78rem;margin-bottom:10px">
      Pre-computed at 1/9 win rate with 800k Monte Carlo sims.
    </p>
    <table class="ref-table" id="scenarios-table">
      <tr><th>#</th><th>Phase</th><th>You</th><th>Opps</th><th>Left</th><th class="num">Value</th><th class="num">Baseline</th></tr>
    </table>
  </div>

  <div class="card">
    <h2>Key Rules</h2>
    <div class="rule"><b>1.</b> At 0 squids, your baseline EV is <b style="color:var(--red)">NEGATIVE</b> — the first squid is worth $65-77k because it saves you from the $90k+ loser penalty</div>
    <div class="rule"><b>2.</b> Threshold squids (&rarr;3, &rarr;5, &rarr;7) are <b>2-3x more valuable</b> than non-threshold squids</div>
    <div class="rule"><b>3.</b> Squid value <b>increases</b> as the game progresses — fewer hands means each matters more</div>
    <div class="rule"><b>4.</b> At 6 squids late game, a single hand is worth <b style="color:var(--green)">$370k-$440k</b></div>
    <div class="rule"><b>5.</b> Opponent concentration helps — squids on few opponents means more at 0 means more payers</div>
    <div class="rule"><b>6.</b> Average penalty for ending at 0: <b style="color:var(--red)">$89k</b> (18 squids worth) — range $75k to $110k</div>
  </div>

  <div class="card">
    <h2>Zero-Squid Penalty</h2>
    <table class="ref-table">
      <tr><th>#</th><th>Phase</th><th>Remain</th><th class="num">P(end@0)</th><th class="num">Avg Penalty</th><th class="num">Hand Value</th><th class="num">Baseline</th></tr>
      <tr><td>1</td><td>EARLY</td><td>7</td><td class="num">43.9%</td><td class="num neg">$102k</td><td class="num pos">$70k</td><td class="num neg">-$34k</td></tr>
      <tr><td>4</td><td>EARLY</td><td>6</td><td class="num">49.3%</td><td class="num neg">$89k</td><td class="num pos">$65k</td><td class="num neg">-$36k</td></tr>
      <tr><td>6</td><td>MID</td><td>5</td><td class="num">55.5%</td><td class="num neg">$98k</td><td class="num pos">$77k</td><td class="num neg">-$47k</td></tr>
    </table>
    <p style="font-size:0.78rem;color:var(--dim);margin-top:8px">
      At 0 squids, there's a 44-56% chance of ending at 0 and paying the $89-102k penalty. Your baseline EV is deeply negative.
    </p>
  </div>
</div>

</div><!-- /content -->

<script>
// ═══════════════════════════════════════════════
// GAME CONSTANTS
// ═══════════════════════════════════════════════
const PAYOUTS = [0, 5000, 10000, 30000, 40000, 100000, 120000, 210000, 240000];
const N_SIMS = 200000;

function getPayout(n) { return PAYOUTS[Math.min(n, 8)]; }

function fmt(n) {
  if (n < 0) return '-$' + Math.abs(Math.round(n)).toLocaleString();
  return '$' + Math.round(n).toLocaleString();
}

// ═══════════════════════════════════════════════
// MONTE CARLO ENGINE
// ═══════════════════════════════════════════════
function computeNet(mySq, opp) {
  if (mySq > 0) {
    let zeros = 0;
    for (let i = 0; i < 8; i++) if (opp[i] === 0) zeros++;
    return getPayout(mySq) * zeros;
  } else {
    let sum = 0;
    for (let i = 0; i < 8; i++) sum += getPayout(opp[i]);
    return -sum;
  }
}

function simulate(mySq, oppArr, remaining, sqPerHand) {
  const nSims = N_SIMS;
  let sumW = 0, sumL = 0;
  let zeroL = 0, penL = 0;
  let zeroW = 0;

  const oppW = new Int32Array(8);
  const oppL = new Int32Array(8);

  for (let s = 0; s < nSims; s++) {
    // Copy opponent arrays
    for (let i = 0; i < 8; i++) { oppW[i] = oppArr[i]; oppL[i] = oppArr[i]; }

    let myW = mySq + sqPerHand;
    let myL = mySq;

    // Lose path: random opponent gets the squid(s)
    oppL[(Math.random() * 8) | 0] += sqPerHand;

    // Future hands — same randomness for both paths (variance reduction)
    for (let h = 0; h < remaining - 1; h++) {
      const w = (Math.random() * 9) | 0;
      if (w === 0) { myW++; myL++; }
      else { oppW[w-1]++; oppL[w-1]++; }
    }

    const ew = computeNet(myW, oppW);
    const el = computeNet(myL, oppL);
    sumW += ew;
    sumL += el;

    if (myL === 0) {
      zeroL++;
      for (let i = 0; i < 8; i++) penL += getPayout(oppL[i]);
    }
    if (myW === 0) zeroW++;
  }

  const evW = sumW / nSims;
  const evL = sumL / nSims;

  return {
    value: evW - evL,
    evWin: evW,
    evLose: evL,
    baseline: evW / 9 + evL * 8 / 9,
    pZeroLose: zeroL / nSims,
    avgPenalty: zeroL > 0 ? penL / zeroL : 0,
  };
}

// ═══════════════════════════════════════════════
// VALIDATION
// ═══════════════════════════════════════════════
function parseOpp(str) {
  if (!str.trim()) return new Array(8).fill(0);
  const parts = str.split(/[,\s]+/).filter(s => s.length > 0).map(Number);
  if (parts.some(isNaN)) return null;
  if (parts.length > 8) return null;
  while (parts.length < 8) parts.push(0);
  // Sort descending for consistency
  parts.sort((a, b) => b - a);
  return parts;
}

function validate() {
  const el = document.getElementById('validation');
  const my = parseInt(document.getElementById('in-my').value) || 0;
  const remain = parseInt(document.getElementById('in-remain').value) || 0;
  const opp = parseOpp(document.getElementById('in-opp').value);
  const dbl = document.getElementById('in-double').checked;

  if (opp === null) {
    el.className = 'validation err';
    el.textContent = 'Invalid opponent counts — use numbers separated by commas';
    return false;
  }

  const oppTotal = opp.reduce((a, b) => a + b, 0);
  const dealt = my + oppTotal;
  const sqRemain = 12 - dealt;
  const oppsAt0 = opp.filter(x => x === 0).length;

  if (my < 0 || my > 12) { el.className = 'validation err'; el.textContent = 'Your squids must be 0-12'; return false; }
  if (remain < 1 || remain > 11) { el.className = 'validation err'; el.textContent = 'Hands remaining must be 1-11'; return false; }
  if (opp.some(x => x < 0)) { el.className = 'validation err'; el.textContent = 'Opponent counts cannot be negative'; return false; }
  if (dealt > 12) { el.className = 'validation err'; el.textContent = `Too many squids: ${dealt}/12 dealt`; return false; }

  el.className = 'validation ok';
  el.textContent = `${dealt}/12 dealt · ${remain} hands left · ${oppsAt0}/8 opponents at 0`;
  return true;
}

// ═══════════════════════════════════════════════
// CALCULATOR
// ═══════════════════════════════════════════════
function runCalc() {
  if (!validate()) return;

  const my = parseInt(document.getElementById('in-my').value) || 0;
  const remain = parseInt(document.getElementById('in-remain').value) || 1;
  const opp = parseOpp(document.getElementById('in-opp').value);
  const dbl = document.getElementById('in-double').checked;
  const sqPerHand = dbl ? 2 : 1;

  const btn = document.getElementById('calc-btn');
  const status = document.getElementById('calc-status');
  btn.disabled = true;
  status.textContent = 'Running 200k simulations...';

  setTimeout(() => {
    const t0 = performance.now();
    const r = simulate(my, opp, remain, sqPerHand);
    const ms = Math.round(performance.now() - t0);

    btn.disabled = false;
    status.textContent = `Done in ${ms}ms`;

    renderResults(r, my, opp, remain, sqPerHand);
  }, 30);
}

function renderResults(r, mySq, opp, remain, sqPerHand) {
  const el = document.getElementById('results');
  el.style.display = 'block';

  const newSq = mySq + sqPerHand;
  const isThreshold = [3, 5, 7].includes(newSq);
  const thrLabel = {3: '2x', 5: '4x', 7: '6x'}[newSq] || '';
  const valueClass = r.value >= 0 ? 'pos' : 'neg';

  // Interpretation
  let interp = '';
  if (r.value >= 300000) interp = 'Massive value — fight for everything';
  else if (r.value >= 150000) interp = 'Very high value — this hand matters enormously';
  else if (r.value >= 80000) interp = 'High value — worth competing hard for';
  else if (r.value >= 40000) interp = 'Solid value — meaningful hand';
  else if (r.value >= 15000) interp = 'Moderate value — still worth playing';
  else interp = 'Lower value — but every bit counts';

  let html = '';

  // Threshold note
  if (isThreshold) {
    html += `<div class="threshold-note">
      Winning triggers <b>${thrLabel} multiplier</b> (→${newSq} squids):
      $${getPayout(mySq).toLocaleString()} → $${getPayout(newSq).toLocaleString()} payout
    </div>`;
  }

  // Hero value
  html += `<div class="result-hero">
    <div class="label">Hand Value (what winning is worth)</div>
    <div class="value ${valueClass}">${fmt(r.value)}</div>
    <div class="interp">${interp}</div>
  </div>`;

  // Grid
  html += `<div class="result-grid">
    <div class="result-cell">
      <div class="label">Baseline EV</div>
      <div class="val ${r.baseline >= 0 ? 'pos' : 'neg'}">${fmt(r.baseline)}</div>
    </div>
    <div class="result-cell">
      <div class="label">EV if Win</div>
      <div class="val ${r.evWin >= 0 ? 'pos' : 'neg'}">${fmt(r.evWin)}</div>
    </div>
    <div class="result-cell">
      <div class="label">EV if Lose</div>
      <div class="val ${r.evLose >= 0 ? 'pos' : 'neg'}">${fmt(r.evLose)}</div>
    </div>
    <div class="result-cell">
      <div class="label">Per Squid</div>
      <div class="val pos">${fmt(r.value / sqPerHand)}</div>
    </div>
  </div>`;

  // Penalty warning
  if (mySq === 0 && r.pZeroLose > 0.01) {
    html += `<div class="penalty-box">
      <div class="title">Zero-Squid Penalty Risk</div>
      If you lose this hand, there's a <b>${(r.pZeroLose * 100).toFixed(1)}%</b> chance
      of ending at 0 squids and paying an average penalty of <b>${fmt(r.avgPenalty)}</b>.
      <br>Winning avoids this risk entirely (you'd have ${sqPerHand}+ squids).
    </div>`;
  }

  el.innerHTML = html;
}

// ═══════════════════════════════════════════════
// TABS
// ═══════════════════════════════════════════════
function switchTab(id) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('panel-' + id).classList.add('active');
}

// ═══════════════════════════════════════════════
// REFERENCE DATA (from corrected Python simulation)
// ═══════════════════════════════════════════════
const SCENARIOS = [
  {id:1,  phase:'EARLY', you:0, opp:'3,1,1',       left:7, value:69977,   baseline:-33728},
  {id:2,  phase:'EARLY', you:2, opp:'1,1,1',        left:7, value:61449,   baseline:59704},
  {id:3,  phase:'EARLY', you:1, opp:'2,1,1',        left:7, value:35510,   baseline:28913},
  {id:4,  phase:'EARLY', you:0, opp:'2,2,1,1',      left:6, value:65225,   baseline:-35601},
  {id:5,  phase:'EARLY', you:3, opp:'1,1,1',        left:6, value:99680,   baseline:114335},
  {id:6,  phase:'MID',   you:0, opp:'3,2,1,1',      left:5, value:77394,   baseline:-46989},
  {id:7,  phase:'MID',   you:2, opp:'2,1,1,1',      left:5, value:54858,   baseline:48698},
  {id:8,  phase:'MID',   you:2, opp:'3,1,1',        left:5, value:68569,   baseline:60865},
  {id:9,  phase:'MID',   you:4, opp:'1,1,1',        left:5, value:177688,  baseline:202878},
  {id:10, phase:'MID',   you:3, opp:'2,1,1',        left:5, value:102691,  baseline:117957},
  {id:11, phase:'MID',   you:2, opp:'2,2,1,1',      left:4, value:58752,   baseline:48650},
  {id:12, phase:'MID',   you:4, opp:'2,1,1',        left:4, value:201240,  baseline:209199},
  {id:13, phase:'MID',   you:5, opp:'1,1,1',        left:4, value:190746,  baseline:360679},
  {id:14, phase:'LATE',  you:4, opp:'2,1,1,1',      left:3, value:184994,  baseline:170909},
  {id:15, phase:'LATE',  you:6, opp:'1,1,1',        left:3, value:368171,  baseline:530238},
  {id:16, phase:'LATE',  you:2, opp:'3,2,1,1',      left:3, value:64148,   baseline:48164},
  {id:17, phase:'LATE',  you:4, opp:'2,2,1,1',      left:2, value:216697,  baseline:171956},
  {id:18, phase:'LATE',  you:6, opp:'2,1,1',        left:2, value:439725,  baseline:559433},
  {id:19, phase:'END',   you:6, opp:'2,1,1,1',      left:1, value:420014,  baseline:466651},
  {id:20, phase:'END',   you:4, opp:'3,2,1,1',      left:1, value:260005,  baseline:168882},
];

function populateScenarios() {
  const table = document.getElementById('scenarios-table');
  for (const s of SCENARIOS) {
    const tr = document.createElement('tr');
    const valClass = s.value >= 0 ? 'pos' : 'neg';
    const baseClass = s.baseline >= 0 ? 'pos' : 'neg';
    tr.innerHTML = `<td>${s.id}</td><td>${s.phase}</td><td>${s.you}</td>
      <td style="font-size:0.72rem">[${s.opp}]</td><td>${s.left}</td>
      <td class="num ${valClass}">${fmt(s.value)}</td>
      <td class="num ${baseClass}">${fmt(s.baseline)}</td>`;
    tr.style.cursor = 'pointer';
    tr.title = 'Click to load into calculator';
    tr.addEventListener('click', () => {
      document.getElementById('in-my').value = s.you;
      document.getElementById('in-opp').value = s.opp;
      document.getElementById('in-remain').value = s.left;
      document.getElementById('in-double').checked = false;
      switchTab('calc');
      document.querySelector('[onclick="switchTab(\'calc\')"]').classList.add('active');
      document.querySelector('[onclick="switchTab(\'ref\')"]').classList.remove('active');
      validate();
    });
    table.appendChild(tr);
  }
}

// ═══════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════
populateScenarios();
validate();
</script>
</body>
</html>
